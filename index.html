<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Galactic Dominion</title>

  <!-- React 17 (compatible avec ReactDOM.render utilisÃ© dans le code) -->
  <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>

  <!-- Babel pour exÃ©cuter JSX directement dans le navigateur -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <!-- Tailwind (optionnel, ton code l'utilise) -->
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    body { margin: 0; padding: 0; overflow-x: hidden; background: #0b1020; color: #fff; }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect } = React;

    // ICÃ”NES SIMPLIFIÃ‰ES (remplacement de lucide-react)
    const Icon = ({ type, size = 20, className = "" }) => {
      const icons = {
        rocket: "ğŸš€",
        zap: "âš¡",
        shield: "ğŸ›¡ï¸",
        users: "ğŸ‘¥",
        swords: "âš”ï¸",
        trending: "ğŸ“ˆ",
        alert: "âš ï¸",
        globe: "ğŸŒ",
        star: "â­",
        lock: "ğŸ”’",
        clock: "â°",
        map: "ğŸ—ºï¸"
      };
      return <span style={{ fontSize: `${size}px` }} className={className}>{icons[type] || "â“"}</span>;
    };

    const GalacticDominion = () => {
      const [gameState, setGameState] = useState('menu');
      const [selectedRace, setSelectedRace] = useState(null);
      const [playerName, setPlayerName] = useState('');
      const [showPitch, setShowPitch] = useState(true);
      
      const [resources, setResources] = useState({
        minerals: 500,
        energy: 300,
        crystals: 100
      });
      
      const [totalVictories, setTotalVictories] = useState(0);
      const [ancientArtifacts, setAncientArtifacts] = useState(0);
      const [secretRaceUnlocked, setSecretRaceUnlocked] = useState(false);
      const [showSecretDiscovery, setShowSecretDiscovery] = useState(false);
      
      const [buildings, setBuildings] = useState({
        mineLevel: 1,
        powerPlantLevel: 1,
        crystalExtractorLevel: 1,
        shipyardLevel: 1,
        defenseLevel: 1
      });
      
      const [buildQueue, setBuildQueue] = useState([]);
      const [shipQueue, setShipQueue] = useState([]);
      
      const [sectors, setSectors] = useState([
        { id: 1, name: 'Secteur Alpha', controlled: true, bonus: 'minerals', value: 1.1 },
        { id: 2, name: 'Secteur Beta', controlled: false, bonus: 'energy', value: 1.15 },
        { id: 3, name: 'Secteur Gamma', controlled: false, bonus: 'crystals', value: 1.2 },
        { id: 4, name: 'NÃ©buleuse OmÃ©ga', controlled: false, bonus: 'all', value: 1.1 }
      ]);
      
      const [commander, setCommander] = useState({
        level: 1,
        xp: 0,
        xpToNext: 100,
        skills: {
          mining: 0,
          combat: 0,
          engineering: 0
        }
      });
      
      const [activeEvent, setActiveEvent] = useState(null);
      
      const [fleet, setFleet] = useState({
        fighters: 5,
        cruisers: 2,
        battleships: 0,
        carriers: 0
      });
      
      const [enemyFleets, setEnemyFleets] = useState([]);
      const [combatLog, setCombatLog] = useState([]);
      const [selectedTab, setSelectedTab] = useState('overview');

      const races = {
        terran: {
          name: "Terriens",
          description: "Descendants de la Terre, ces explorateurs ont colonisÃ© des centaines de mondes.",
          bonus: { energy: 1.2, fighters: 1.1, buildSpeed: 0.9 },
          color: "#3b82f6",
          icon: "ğŸŒ",
          bgGradient: "from-blue-900 via-cyan-900 to-blue-800",
          special: "Construction 10% plus rapide"
        },
        alien: {
          name: "Xylons",
          description: "Ancienne civilisation millÃ©naire maÃ®trisant les cristaux Ã©nergÃ©tiques.",
          bonus: { crystals: 1.3, battleships: 1.15, commanderXP: 1.2 },
          color: "#8b5cf6",
          icon: "ğŸ‘½",
          bgGradient: "from-purple-900 via-violet-900 to-purple-800",
          special: "XP Commandant +20%"
        },
        ancient: {
          name: "PrÃ©curseurs",
          description: "Race mystÃ©rieuse disparue il y a des Ã©ons. Leurs technologies transcendent les lois de la physique.",
          bonus: { minerals: 1.25, energy: 1.25, crystals: 1.25, fighters: 1.2, battleships: 1.2, buildSpeed: 0.8 },
          color: "#fbbf24",
          icon: "âš¡",
          bgGradient: "from-amber-900 via-yellow-900 to-orange-900",
          special: "Tous les bonus + Construction 20% plus rapide",
          secret: true
        }
      };

      useEffect(() => {
        if (buildQueue.length === 0 && shipQueue.length === 0) return;
        
        const interval = setInterval(() => {
          if (buildQueue.length > 0) {
            setBuildQueue(prev => {
              const updated = [...prev];
              updated[0].timeRemaining -= 1;
              
              if (updated[0].timeRemaining <= 0) {
                setBuildings(b => ({...b, [updated[0].type]: b[updated[0].type] + 1}));
                setCombatLog(l => [`âœ… ${updated[0].name} amÃ©liorÃ©!`, ...l].slice(0, 5));
                return updated.slice(1);
              }
              return updated;
            });
          }
          
          if (shipQueue.length > 0) {
            setShipQueue(prev => {
              const updated = [...prev];
              updated[0].timeRemaining -= 1;
              
              if (updated[0].timeRemaining <= 0) {
                setFleet(f => ({...f, [updated[0].type]: f[updated[0].type] + 1}));
                setCombatLog(l => [`ğŸš€ ${updated[0].name} construit!`, ...l].slice(0, 5));
                return updated.slice(1);
              }
              return updated;
            });
          }
        }, 1000);
        
        return () => clearInterval(interval);
      }, [buildQueue.length, shipQueue.length]);

      useEffect(() => {
        if (gameState !== 'game') return;
        
        const eventInterval = setInterval(() => {
          const events = [
            { 
              type: 'bonus', 
              title: 'ğŸ’« Pluie de MÃ©tÃ©orites', 
              desc: 'Des mÃ©tÃ©orites riches tombent!',
              effect: () => setResources(r => ({...r, minerals: r.minerals + 500}))
            },
            { 
              type: 'bonus', 
              title: 'âš¡ TempÃªte Solaire', 
              desc: 'Ã‰nergie captÃ©e!',
              effect: () => setResources(r => ({...r, energy: r.energy + 400}))
            },
            { 
              type: 'malus', 
              title: 'ğŸŒªï¸ Anomalie Spatiale', 
              desc: 'Construction ralentie',
              effect: () => {
                setBuildQueue(q => q.map((b, i) => i === 0 ? {...b, timeRemaining: b.timeRemaining + 30} : b));
                setShipQueue(q => q.map((s, i) => i === 0 ? {...s, timeRemaining: s.timeRemaining + 30} : s));
              }
            }
          ];
          
          if (Math.random() < 0.2 && !activeEvent) {
            const event = events[Math.floor(Math.random() * events.length)];
            setActiveEvent(event);
            setTimeout(() => {
              event.effect();
              setActiveEvent(null);
            }, 5000);
          }
        }, 30000);
        
        return () => clearInterval(eventInterval);
      }, [gameState, activeEvent]);

      useEffect(() => {
        if (!secretRaceUnlocked && (totalVictories >= 10 || ancientArtifacts >= 3)) {
          setSecretRaceUnlocked(true);
          setShowSecretDiscovery(true);
          setTimeout(() => setShowSecretDiscovery(false), 5000);
        }
      }, [totalVictories, ancientArtifacts, secretRaceUnlocked]);

      useEffect(() => {
        if (gameState !== 'game') return;
        
        const interval = setInterval(() => {
          setResources(prev => {
            const bonus = races[selectedRace].bonus;
            const sectorBonus = sectors.filter(s => s.controlled).reduce((acc, s) => {
              if (s.bonus === 'all') return { minerals: acc.minerals * s.value, energy: acc.energy * s.value, crystals: acc.crystals * s.value };
              return { ...acc, [s.bonus]: (acc[s.bonus] || 1) * s.value };
            }, { minerals: 1, energy: 1, crystals: 1 });
            
            const miningBonus = 1 + (commander.skills.mining * 0.05);
            
            return {
              minerals: prev.minerals + buildings.mineLevel * 10 * (bonus.minerals || 1) * sectorBonus.minerals * miningBonus,
              energy: prev.energy + buildings.powerPlantLevel * 8 * (bonus.energy || 1) * sectorBonus.energy,
              crystals: prev.crystals + buildings.crystalExtractorLevel * 3 * (bonus.crystals || 1) * sectorBonus.crystals
            };
          });
        }, 3000);
        
        return () => clearInterval(interval);
      }, [gameState, buildings, selectedRace, sectors, commander.skills.mining]);

      useEffect(() => {
        if (gameState !== 'game' || enemyFleets.length >= 3) return;
        
        const interval = setInterval(() => {
          const hasArtifact = Math.random() < 0.15;
          const controlsSector = Math.random() < 0.3;
          const availableSectors = sectors.filter(s => !s.controlled);
          const sector = controlsSector && availableSectors.length > 0 
            ? availableSectors[Math.floor(Math.random() * availableSectors.length)]
            : null;
          
          const newEnemy = {
            id: Date.now(),
            name: `Flotte ${hasArtifact ? 'â­' : controlsSector ? 'ğŸ¯' : ''} ${Math.floor(Math.random() * 1000)}`,
            fighters: Math.floor(Math.random() * 15) + 5,
            cruisers: Math.floor(Math.random() * 8) + 2,
            battleships: Math.floor(Math.random() * 3),
            hasArtifact,
            sector,
            rewards: {
              minerals: Math.floor(Math.random() * 200) + 100,
              energy: Math.floor(Math.random() * 150) + 50,
              crystals: Math.floor(Math.random() * 50) + 25,
              xp: Math.floor(Math.random() * 30) + 20
            }
          };
          
          setEnemyFleets(prev => [...prev, newEnemy]);
        }, 15000);
        
        return () => clearInterval(interval);
      }, [gameState, enemyFleets.length, sectors]);

      const upgradeSkill = (skill) => {
        const totalSkills = commander.skills.mining + commander.skills.combat + commander.skills.engineering;
        if (commander.level > totalSkills) {
          setCommander(prev => ({
            ...prev,
            skills: { ...prev.skills, [skill]: prev.skills[skill] + 1 }
          }));
          setCombatLog(l => [`ğŸ“ˆ ${skill} amÃ©liorÃ©!`, ...l].slice(0, 5));
        }
      };

      const conquestSector = (sectorId) => {
        setSectors(prev => prev.map(s => 
          s.id === sectorId ? {...s, controlled: true} : s
        ));
        setCombatLog(l => [`ğŸ¯ Secteur conquis!`, ...l].slice(0, 5));
      };

      const attackEnemy = (enemy) => {
        const bonus = races[selectedRace].bonus;
        const combatBonus = 1 + (commander.skills.combat * 0.1);
        
        const playerPower = (
          fleet.fighters * 10 * (bonus.fighters || 1) + 
          fleet.cruisers * 30 + 
          fleet.battleships * 80 * (bonus.battleships || 1) + 
          fleet.carriers * 150
        ) * combatBonus;
          
        const enemyPower = 
          enemy.fighters * 10 + 
          enemy.cruisers * 30 + 
          enemy.battleships * 80;
        
        const playerLosses = {
          fighters: Math.floor(fleet.fighters * (enemyPower / (playerPower + enemyPower)) * 0.5),
          cruisers: Math.floor(fleet.cruisers * (enemyPower / (playerPower + enemyPower)) * 0.3),
          battleships: Math.floor(fleet.battleships * (enemyPower / (playerPower + enemyPower)) * 0.2),
          carriers: Math.floor(fleet.carriers * (enemyPower / (playerPower + enemyPower)) * 0.1)
        };
        
        if (playerPower > enemyPower) {
          setFleet(prev => ({
            fighters: Math.max(0, prev.fighters - playerLosses.fighters),
            cruisers: Math.max(0, prev.cruisers - playerLosses.cruisers),
            battleships: Math.max(0, prev.battleships - playerLosses.battleships),
            carriers: Math.max(0, prev.carriers - playerLosses.carriers)
          }));
          
          setResources(prev => ({
            minerals: prev.minerals + enemy.rewards.minerals,
            energy: prev.energy + enemy.rewards.energy,
            crystals: prev.crystals + enemy.rewards.crystals
          }));
          
          const xpGain = enemy.rewards.xp * (races[selectedRace].bonus.commanderXP || 1);
          setCommander(prev => {
            const newXP = prev.xp + xpGain;
            if (newXP >= prev.xpToNext) {
              setCombatLog(l => [`ğŸŒŸ Niveau ${prev.level + 1}!`, ...l].slice(0, 5));
              return {
                ...prev,
                level: prev.level + 1,
                xp: newXP - prev.xpToNext,
                xpToNext: Math.floor(prev.xpToNext * 1.5)
              };
            }
            return { ...prev, xp: newXP };
          });
          
          setTotalVictories(prev => prev + 1);
          
          if (enemy.hasArtifact) {
            setAncientArtifacts(prev => prev + 1);
            setCombatLog(prev => [`â­ ARTEFACT! (${ancientArtifacts + 1}/3)`, ...prev].slice(0, 5));
          }
          
          if (enemy.sector) {
            conquestSector(enemy.sector.id);
          }
          
          setCombatLog(prev => [`VICTOIRE! +${enemy.rewards.minerals}M`, ...prev].slice(0, 5));
          setEnemyFleets(prev => prev.filter(e => e.id !== enemy.id));
        } else {
          setFleet(prev => ({
            fighters: Math.max(0, prev.fighters - playerLosses.fighters * 2),
            cruisers: Math.max(0, prev.cruisers - playerLosses.cruisers * 2),
            battleships: Math.max(0, prev.battleships - playerLosses.battleships * 2),
            carriers: Math.max(0, prev.carriers - playerLosses.carriers * 2)
          }));
          
          setCombatLog(prev => [`DÃ‰FAITE!`, ...prev].slice(0, 5));
        }
      };

      const buildBuilding = (type) => {
        const buildings_data = {
          mineLevel: { name: 'Mine', cost: { minerals: 100, energy: 50 }, time: 60 },
          powerPlantLevel: { name: 'Centrale', cost: { minerals: 80, energy: 40 }, time: 50 },
          crystalExtractorLevel: { name: 'Extracteur', cost: { minerals: 150, energy: 100, crystals: 50 }, time: 90 },
          shipyardLevel: { name: 'Chantier', cost: { minerals: 200, energy: 150, crystals: 100 }, time: 120 },
          defenseLevel: { name: 'DÃ©fense', cost: { minerals: 180, energy: 120, crystals: 80 }, time: 80 }
        };
        
        const building = buildings_data[type];
        const currentLevel = buildings[type];
        const adjustedCost = {
          minerals: Math.floor(building.cost.minerals * Math.pow(1.5, currentLevel)),
          energy: Math.floor(building.cost.energy * Math.pow(1.5, currentLevel)),
          crystals: building.cost.crystals ? Math.floor(building.cost.crystals * Math.pow(1.5, currentLevel)) : 0
        };
        
        const buildTime = Math.floor(building.time * Math.pow(1.3, currentLevel) * (races[selectedRace].bonus.buildSpeed || 1) * (1 - commander.skills.engineering * 0.05));
        
        if (resources.minerals >= adjustedCost.minerals && 
            resources.energy >= adjustedCost.energy && 
            resources.crystals >= adjustedCost.crystals) {
          setResources(prev => ({
            minerals: prev.minerals - adjustedCost.minerals,
            energy: prev.energy - adjustedCost.energy,
            crystals: prev.crystals - adjustedCost.crystals
          }));
          
          setBuildQueue(prev => [...prev, {
            type,
            name: building.name,
            timeRemaining: buildTime,
            totalTime: buildTime
          }]);
        }
      };

      const buildShip = (type) => {
        const shipCosts = {
          fighters: { name: 'Chasseur', minerals: 50, energy: 30, time: 30 },
          cruisers: { name: 'Croiseur', minerals: 150, energy: 100, crystals: 50, time: 60 },
          battleships: { name: 'CuirassÃ©', minerals: 400, energy: 300, crystals: 200, time: 120 },
          carriers: { name: 'Porte-vaisseaux', minerals: 800, energy: 600, crystals: 400, time: 180 }
        };
        
        const ship = shipCosts[type];
        const buildTime = Math.floor(ship.time * (races[selectedRace].bonus.buildSpeed || 1) * (1 - commander.skills.engineering * 0.05));
        
        if (resources.minerals >= ship.minerals && 
            resources.energy >= ship.energy && 
            (!ship.crystals || resources.crystals >= ship.crystals)) {
          setResources(prev => ({
            minerals: prev.minerals - ship.minerals,
            energy: prev.energy - ship.energy,
            crystals: prev.crystals - (ship.crystals || 0)
          }));
          
          setShipQueue(prev => [...prev, {
            type,
            name: ship.name,
            timeRemaining: buildTime,
            totalTime: buildTime
          }]);
        }
      };

      const formatTime = (seconds) => {
        const mins = Math.floor(seconds / 60);
        const secs = seconds % 60;
        return `${mins}:${secs.toString().padStart(2, '0')}`;
      };

      // MENU
      if (gameState === 'menu') {
        return (
          <div className="min-h-screen bg-gradient-to-b from-gray-900 via-blue-900 to-purple-900 flex items-center justify-center p-4">
            <div className="max-w-2xl w-full">
              {showPitch && (
                <div className="bg-black bg-opacity-80 rounded-lg p-8 mb-6 border-2 border-blue-500">
                  <div className="flex justify-between items-start mb-4">
                    <h2 className="text-2xl font-bold text-blue-400">ğŸ“œ Chroniques Galactiques</h2>
                    <button onClick={() => setShowPitch(false)} className="text-gray-400">âœ•</button>
                  </div>
                  <div className="text-gray-300 space-y-3 text-sm">
                    <p><span className="text-blue-400 font-semibold">An 3247.</span> La galaxie est en chaos.</p>
                    <p>Les <span className="text-blue-400">Terriens</span> et les <span className="text-purple-400">Xylons</span> se disputent les ressources.</p>
                    <p>Mais une <span className="text-yellow-400">troisiÃ¨me race</span> attend d'Ãªtre dÃ©couverte...</p>
                  </div>
                </div>
              )}
              
              <div className="bg-black bg-opacity-80 rounded-lg p-8 border-2 border-blue-500">
                <h1 className="text-5xl font-bold text-center bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent mb-4">
                  GALACTIC DOMINION
                </h1>
                
                <input
                  type="text"
                  placeholder="Nom de commandant"
                  value={playerName}
                  onChange={(e) => setPlayerName(e.target.value)}
                  className="w-full p-4 mb-6 bg-gray-900 text-white rounded-lg border-2 border-gray-700 focus:border-blue-500 outline-none"
                />
                
                <button
                  onClick={() => playerName.trim() && setGameState('raceSelect')}
                  disabled={!playerName.trim()}
                  className="w-full py-4 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg font-bold text-lg hover:from-blue-600 hover:to-purple-600 disabled:opacity-50"
                >
                  âš”ï¸ Commencer
                </button>
              </div>
            </div>
          </div>
        );
      }

      // SÃ‰LECTION RACE
      if (gameState === 'raceSelect') {
        return (
          <div className="min-h-screen bg-gradient-to-b from-gray-900 via-blue-900 to-purple-900 flex items-center justify-center p-4">
            <div className="max-w-5xl w-full">
              <h2 className="text-4xl font-bold text-center text-white mb-8">Choisissez Votre Civilisation</h2>
              
              <div className="grid md:grid-cols-3 gap-6">
                {Object.entries(races).map(([key, race]) => {
                  const isLocked = race.secret && !secretRaceUnlocked;
                  
                  return (
                    <div
                      key={key}
                      onClick={() => !isLocked && (setSelectedRace(key), setGameState('game'))}
                      className={`bg-black bg-opacity-80 rounded-xl p-6 border-2 transition ${isLocked ? 'opacity-50' : 'cursor-pointer hover:scale-105'}`}
                      style={{ borderColor: isLocked ? '#666' : race.color }}
                    >
                      {isLocked && (
                        <div className="text-center">
                          <div className="text-6xl mb-4">ğŸ”’</div>
                          <p className="text-yellow-400 font-semibold">Race SecrÃ¨te</p>
                          <p className="text-xs text-gray-400 mt-2">{totalVictories}/10 victoires | {ancientArtifacts}/3 artefacts</p>
                        </div>
                      )}
                      {!isLocked && (
                        <>
                          <div className="text-7xl text-center mb-4">{race.icon}</div>
                          <h3 className="text-3xl font-bold text-center mb-3" style={{ color: race.color }}>{race.name}</h3>
                          <p className="text-gray-300 text-center text-sm mb-4">{race.description}</p>
                          <div className="bg-gray-900 rounded-lg p-3">
                            <p className="text-yellow-400 text-center text-sm">âš¡ {race.special}</p>
                          </div>
                        </>
                      )}
                    </div>
                  );
                })}
              </div>
            </div>
          </div>
        );
      }

      const EventNotif = () => activeEvent && (
        <div className="fixed top-4 right-4 z-40">
          <div className={`${activeEvent.type === 'bonus' ? 'bg-green-900' : 'bg-red-900'} p-4 rounded-lg border-2 max-w-xs`}>
            <h3 className="font-bold text-white">{activeEvent.title}</h3>
            <p className="text-sm text-gray-200">{activeEvent.desc}</p>
          </div>
        </div>
      );

      const SecretNotif = () => showSecretDiscovery && (
        <div className="fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-70">
          <div className="bg-gradient-to-br from-yellow-900 to-amber-900 p-8 rounded-2xl border-4 border-yellow-400 max-w-md">
            <div className="text-center">
              <div className="text-6xl mb-4">âš¡</div>
              <h2 className="text-3xl font-bold text-yellow-300 mb-4">DÃ‰COUVERTE!</h2>
              <p className="text-4xl font-bold text-white">LES PRÃ‰CURSEURS</p>
            </div>
          </div>
        </div>
      );

      return (
        <div className="min-h-screen text-white p-2 sm:p-4 bg-gradient-to-b" style={{ background: `linear-gradient(to bottom, #1a202c, #2d3748, #1a202c)` }}>
          <EventNotif />
          <SecretNotif />
          
          <div className="max-w-6xl mx-auto">
            {/* HEADER */}
            <div className="bg-black bg-opacity-70 rounded-xl p-4 mb-4 border-2" style={{ borderColor: races[selectedRace].color }}>
              <div className="flex justify-between items-center mb-4">
                <div>
                  <h1 className="text-2xl font-bold">{playerName} {races[selectedRace].icon}</h1>
                  <p className="text-sm" style={{ color: races[selectedRace].color }}>{races[selectedRace].name}</p>
                  <p className="text-xs text-gray-400 mt-1">
                    Niv.{commander.level} | {commander.xp}/{commander.xpToNext}XP | ğŸ†{totalVictories} | â­{ancientArtifacts}
                  </p>
                </div>
              </div>
              
              <div className="grid grid-cols-3 gap-2">
                <div className="bg-gray-900 p-2 rounded border border-blue-500">
                  <div className="text-xs text-gray-400">MinÃ©raux</div>
                  <div className="font-bold text-blue-400">{Math.floor(resources.minerals)}</div>
                </div>
                <div className="bg-gray-900 p-2 rounded border border-yellow-500">
                  <div className="text-xs text-gray-400">Ã‰nergie</div>
                  <div className="font-bold text-yellow-400">{Math.floor(resources.energy)}</div>
                </div>
                <div className="bg-gray-900 p-2 rounded border border-purple-500">
                  <div className="text-xs text-gray-400">Cristaux</div>
                  <div className="font-bold text-purple-400">{Math.floor(resources.crystals)}</div>
                </div>
              </div>

              {/* FILES */}
              {(buildQueue.length > 0 || shipQueue.length > 0) && (
                <div className="mt-4 space-y-2">
                  {buildQueue.slice(0,2).map((item, i
) => (
                    <div key={i} className="bg-gray-900 p-2 rounded flex justify-between text-xs">
                      <span>ğŸ—ï¸ {item.name}</span>
                      <span className="text-yellow-400">â° {formatTime(item.timeRemaining)}</span>
                    </div>
                  ))}
                  {shipQueue.slice(0,2).map((item, i) => (
                    <div key={i} className="bg-gray-900 p-2 rounded flex justify-between text-xs">
                      <span>ğŸš€ {item.name}</span>
                      <span className="text-green-400">â° {formatTime(item.timeRemaining)}</span>
                    </div>
                  ))}
                </div>
              )}
            </div>

            {/* TABS */}
            <div className="flex gap-2 mb-4 overflow-x-auto">
              {['overview', 'commander', 'sectors', 'buildings', 'fleet', 'combat'].map(tab => (
                <button
                  key={tab}
                  onClick={() => setSelectedTab(tab)}
                  className={`px-3 py-2 rounded-lg whitespace-nowrap text-sm ${
                    selectedTab === tab ? 'bg-opacity-90' : 'bg-black bg-opacity-50'
                  }`}
                  style={{ 
                    backgroundColor: selectedTab === tab ? races[selectedRace].color : undefined,
                    borderWidth: '2px',
                    borderColor: selectedTab === tab ? races[selectedRace].color : 'transparent'
                  }}
                >
                  {tab === 'overview' && 'ğŸ '}
                  {tab === 'commander' && 'ğŸ‘¤'}
                  {tab === 'sectors' && 'ğŸ—ºï¸'}
                  {tab === 'buildings' && 'ğŸ—ï¸'}
                  {tab === 'fleet' && 'ğŸš€'}
                  {tab === 'combat' && 'âš”ï¸'}
                </button>
              ))}
            </div>

            {/* OVERVIEW */}
            {selectedTab === 'overview' && (
              <div className="space-y-4">
                <div className="bg-black bg-opacity-70 rounded-xl p-4 border-2 border-gray-700">
                  <h3 className="font-bold mb-2">ğŸ“ˆ Production (par 3s)</h3>
                  <div className="grid grid-cols-3 gap-2 text-sm">
                    <div>Min: +{Math.floor(buildings.mineLevel * 10 * (races[selectedRace].bonus.minerals || 1))}</div>
                    <div>Ene: +{Math.floor(buildings.powerPlantLevel * 8 * (races[selectedRace].bonus.energy || 1))}</div>
                    <div>Cri: +{Math.floor(buildings.crystalExtractorLevel * 3 * (races[selectedRace].bonus.crystals || 1))}</div>
                  </div>
                </div>

                <div className="bg-black bg-opacity-70 rounded-xl p-4 border-2 border-gray-700">
                  <h3 className="font-bold mb-2">ğŸš€ Flotte</h3>
                  <div className="grid grid-cols-2 gap-2 text-sm">
                    <div>âœˆï¸ Chasseurs: {fleet.fighters}</div>
                    <div>ğŸš€ Croiseurs: {fleet.cruisers}</div>
                    <div>ğŸ›¸ CuirassÃ©s: {fleet.battleships}</div>
                    <div>ğŸ›°ï¸ Porte-vaisseaux: {fleet.carriers}</div>
                  </div>
                </div>

                {combatLog.length > 0 && (
                  <div className="bg-black bg-opacity-70 rounded-xl p-4 border-2 border-gray-700">
                    <h3 className="font-bold mb-2">ğŸ“° Journal</h3>
                    {combatLog.map((log, i) => (
                      <div key={i} className="text-xs text-gray-300 mb-1">{log}</div>
                    ))}
                  </div>
                )}
              </div>
            )}

            {/* COMMANDANT */}
            {selectedTab === 'commander' && (
              <div className="bg-black bg-opacity-70 rounded-xl p-6 border-2 border-gray-700">
                <h3 className="text-xl font-bold mb-4">ğŸ‘¤ Commandant {playerName}</h3>
                <div className="mb-4">
                  <div className="flex justify-between mb-2 text-sm">
                    <span>Niveau {commander.level}</span>
                    <span>{commander.xp}/{commander.xpToNext} XP</span>
                  </div>
                  <div className="w-full bg-gray-700 rounded-full h-3">
                    <div 
                      className="bg-gradient-to-r from-yellow-400 to-orange-500 h-3 rounded-full"
                      style={{ width: `${(commander.xp / commander.xpToNext) * 100}%` }}
                    />
                  </div>
                </div>

                <p className="text-sm text-yellow-400 mb-4">
                  Points disponibles: {commander.level - (commander.skills.mining + commander.skills.combat + commander.skills.engineering)}
                </p>

                <div className="space-y-3">
                  <div className="bg-gray-900 p-3 rounded-lg">
                    <div className="flex justify-between items-center">
                      <div>
                        <h4 className="font-bold text-sm">â›ï¸ Exploitation</h4>
                        <p className="text-xs text-gray-400">+5% minÃ©raux par niveau</p>
                      </div>
                      <div className="flex items-center gap-2">
                        <span className="text-xl text-blue-400">{commander.skills.mining}</span>
                        <button
                          onClick={() => upgradeSkill('mining')}
                          disabled={commander.level <= (commander.skills.mining + commander.skills.combat + commander.skills.engineering)}
                          className="px-3 py-1 bg-blue-600 rounded text-sm disabled:opacity-50"
                        >
                          +
                        </button>
                      </div>
                    </div>
                  </div>

                  <div className="bg-gray-900 p-3 rounded-lg">
                    <div className="flex justify-between items-center">
                      <div>
                        <h4 className="font-bold text-sm">âš”ï¸ Combat</h4>
                        <p className="text-xs text-gray-400">+10% puissance par niveau</p>
                      </div>
                      <div className="flex items-center gap-2">
                        <span className="text-xl text-red-400">{commander.skills.combat}</span>
                        <button
                          onClick={() => upgradeSkill('combat')}
                          disabled={commander.level <= (commander.skills.mining + commander.skills.combat + commander.skills.engineering)}
                          className="px-3 py-1 bg-red-600 rounded text-sm disabled:opacity-50"
                        >
                          +
                        </button>
                      </div>
                    </div>
                  </div>

                  <div className="bg-gray-900 p-3 rounded-lg">
                    <div className="flex justify-between items-center">
                      <div>
                        <h4 className="font-bold text-sm">ğŸ”§ IngÃ©nierie</h4>
                        <p className="text-xs text-gray-400">-5% temps construction par niveau</p>
                      </div>
                      <div className="flex items-center gap-2">
                        <span className="text-xl text-yellow-400">{commander.skills.engineering}</span>
                        <button
                          onClick={() => upgradeSkill('engineering')}
                          disabled={commander.level <= (commander.skills.mining + commander.skills.combat + commander.skills.engineering)}
                          className="px-3 py-1 bg-yellow-600 rounded text-sm disabled:opacity-50"
                        >
                          +
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            )}

            {/* SECTEURS */}
            {selectedTab === 'sectors' && (
              <div className="space-y-3">
                {sectors.map(sector => (
                  <div 
                    key={sector.id} 
                    className={`bg-black bg-opacity-70 rounded-xl p-4 border-2 ${
                      sector.controlled ? 'border-green-500' : 'border-gray-700'
                    }`}
                  >
                    <div className="flex justify-between items-center">
                      <div>
                        <h4 className="font-bold">{sector.name}</h4>
                        <p className="text-xs text-gray-400">
                          Bonus: {sector.bonus === 'all' ? 'Toutes ressources' : sector.bonus} +{Math.round((sector.value - 1) * 100)}%
                        </p>
                      </div>
                      <span className={`px-3 py-1 rounded text-sm ${sector.controlled ? 'bg-green-600' : 'bg-gray-700'}`}>
                        {sector.controlled ? 'âœ“' : 'ğŸ”’'}
                      </span>
                    </div>
                  </div>
                ))}
              </div>
            )}

            {/* BÃ‚TIMENTS */}
            {selectedTab === 'buildings' && (
              <div className="space-y-3">
                {Object.entries({
                  mineLevel: { name: 'Mine', icon: 'â›ï¸', cost: { minerals: 100, energy: 50 }, time: 60 },
                  powerPlantLevel: { name: 'Centrale', icon: 'âš¡', cost: { minerals: 80, energy: 40 }, time: 50 },
                  crystalExtractorLevel: { name: 'Extracteur', icon: 'ğŸ’', cost: { minerals: 150, energy: 100, crystals: 50 }, time: 90 },
                  shipyardLevel: { name: 'Chantier', icon: 'ğŸ­', cost: { minerals: 200, energy: 150, crystals: 100 }, time: 120 },
                  defenseLevel: { name: 'DÃ©fense', icon: 'ğŸ›¡ï¸', cost: { minerals: 180, energy: 120, crystals: 80 }, time: 80 }
                }).map(([key, building]) => {
                  const level = buildings[key];
                  const cost = {
                    minerals: Math.floor(building.cost.minerals * Math.pow(1.5, level)),
                    energy: Math.floor(building.cost.energy * Math.pow(1.5, level)),
                    crystals: building.cost.crystals ? Math.floor(building.cost.crystals * Math.pow(1.5, level)) : 0
                  };
                  const buildTime = Math.floor(building.time * Math.pow(1.3, level) * (races[selectedRace].bonus.buildSpeed || 1) * (1 - commander.skills.engineering * 0.05));
                  const canBuild = resources.minerals >= cost.minerals && resources.energy >= cost.energy && resources.crystals >= cost.crystals;
                  
                  return (
                    <div key={key} className="bg-black bg-opacity-70 rounded-xl p-3 border-2 border-gray-700">
                      <div className="flex justify-between items-center">
                        <div>
                          <div className="flex items-center gap-2 mb-1">
                            <span className="text-xl">{building.icon}</span>
                            <span className="font-bold text-sm">{building.name}</span>
                            <span className="text-xs text-gray-400">Niv.{level}</span>
                          </div>
                          <div className="text-xs text-gray-400">
                            {cost.minerals}M / {cost.energy}E {cost.crystals > 0 && `/ ${cost.crystals}C`} | â°{formatTime(buildTime)}
                          </div>
                        </div>
                        <button
                          onClick={() => buildBuilding(key)}
                          disabled={!canBuild}
                          className={`px-3 py-1 rounded text-sm ${canBuild ? 'bg-blue-600 hover:bg-blue-700' : 'bg-gray-700 opacity-50'}`}
                        >
                          Construire
                        </button>
                      </div>
                    </div>
                  );
                })}
              </div>
            )}

            {/* FLOTTE */}
            {selectedTab === 'fleet' && (
              <div className="space-y-3">
                {Object.entries({
                  fighters: { name: 'Chasseur', icon: 'âœˆï¸', cost: { minerals: 50, energy: 30 }, time: 30 },
                  cruisers: { name: 'Croiseur', icon: 'ğŸš€', cost: { minerals: 150, energy: 100, crystals: 50 }, time: 60 },
                  battleships: { name: 'CuirassÃ©', icon: 'ğŸ›¸', cost: { minerals: 400, energy: 300, crystals: 200 }, time: 120 },
                  carriers: { name: 'Porte-vaisseaux', icon: 'ğŸ›°ï¸', cost: { minerals: 800, energy: 600, crystals: 400 }, time: 180 }
                }).map(([key, ship]) => {
                  const buildTime = Math.floor(ship.time * (races[selectedRace].bonus.buildSpeed || 1) * (1 - commander.skills.engineering * 0.05));
                  const canBuild = resources.minerals >= ship.cost.minerals && resources.energy >= ship.cost.energy && (!ship.cost.crystals || resources.crystals >= ship.cost.crystals);
                  
                  return (
                    <div key={key} className="bg-black bg-opacity-70 rounded-xl p-3 border-2 border-gray-700">
                      <div className="flex justify-between items-center">
                        <div>
                          <div className="flex items-center gap-2 mb-1">
                            <span className="text-xl">{ship.icon}</span>
                            <span className="font-bold text-sm">{ship.name}</span>
                            <span className="text-xs text-gray-400">Ã—{fleet[key]}</span>
                          </div>
                          <div className="text-xs text-gray-400">
                            {ship.cost.minerals}M / {ship.cost.energy}E {ship.cost.crystals && `/ ${ship.cost.crystals}C`} | â°{formatTime(buildTime)}
                          </div>
                        </div>
                        <button
                          onClick={() => buildShip(key)}
                          disabled={!canBuild}
                          className={`px-3 py-1 rounded text-sm ${canBuild ? 'bg-green-600 hover:bg-green-700' : 'bg-gray-700 opacity-50'}`}
                        >
                          Construire
                        </button>
                      </div>
                    </div>
                  );
                })}
              </div>
            )}

            {/* COMBAT */}
            {selectedTab === 'combat' && (
              <div className="space-y-3">
                {enemyFleets.length === 0 ? (
                  <div className="bg-black bg-opacity-70 rounded-xl p-8 text-center border-2 border-gray-700">
                    <div className="text-6xl mb-4">ğŸŒ</div>
                    <p className="text-gray-400">Aucune flotte dÃ©tectÃ©e...</p>
                    <p className="text-xs text-gray-500 mt-2">Ennemis gÃ©nÃ©rÃ©s toutes les 15 secondes</p>
                  </div>
                ) : (
                  enemyFleets.map(enemy => {
                    const bonus = races[selectedRace].bonus;
                    const combatBonus = 1 + (commander.skills.combat * 0.1);
                    const enemyPower = enemy.fighters * 10 + enemy.cruisers * 30 + enemy.battleships * 80;
                    const playerPower = (fleet.fighters * 10 * (bonus.fighters || 1) + fleet.cruisers * 30 + fleet.battleships * 80 * (bonus.battleships || 1) + fleet.carriers * 150) * combatBonus;
                    const winChance = playerPower > 0 ? Math.round((playerPower / (playerPower + enemyPower)) * 100) : 0;
                    
                    return (
                      <div key={enemy.id} className={`bg-black bg-opacity-70 rounded-xl p-4 border-2 ${
                        enemy.hasArtifact ? 'border-yellow-500 shadow-lg' : enemy.sector ? 'border-purple-500 shadow-lg' : 'border-red-700'
                      }`}>
                        <div className="flex justify-between items-start mb-2">
                          <div>
                            <h3 className={`font-bold text-sm ${enemy.hasArtifact ? 'text-yellow-400' : enemy.sector ? 'text-purple-400' : 'text-red-400'}`}>
                              {enemy.name}
                            </h3>
                            {enemy.sector && <div className="text-xs text-purple-300">ğŸ¯ {enemy.sector.name}</div>}
                            <div className="text-xs text-gray-400">{enemy.fighters}âœˆï¸ {enemy.cruisers}ğŸš€ {enemy.battleships}ğŸ›¸</div>
                            <div className={`text-xs mt-1 ${winChance >= 70 ? 'text-green-400' : winChance >= 40 ? 'text-yellow-400' : 'text-red-400'}`}>
                              Chances: {winChance}%
                            </div>
                          </div>
                          <button
                            onClick={() => attackEnemy(enemy)}
                            className="px-4 py-2 bg-gradient-to-r from-red-600 to-orange-600 rounded text-sm font-bold hover:from-red-700 hover:to-orange-700"
                          >
                            âš”ï¸ Attaquer
                          </button>
                        </div>
                        <div className="text-xs text-green-400">
                          ğŸ’° {enemy.rewards.minerals}M / {enemy.rewards.energy}E / {enemy.rewards.crystals}C / {enemy.rewards.xp}XP
                          {enemy.hasArtifact && <span className="text-yellow-400 ml-2">â­ Artefact!</span>}
                          {enemy.sector && <span className="text-purple-400 ml-2">ğŸ¯ ConquÃªte secteur!</span>}
                        </div>
                      </div>
                    );
                  })
                )}
              </div>
            )}
          </div>
        </div>
      );
    };

    // RENDU FINAL
    ReactDOM.render(<GalacticDominion />, document.getElementById('root'));
  </script>
</body>
</html>
